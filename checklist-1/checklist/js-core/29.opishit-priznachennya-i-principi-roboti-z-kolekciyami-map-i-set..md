# 29.Опишіть призначення і принципи роботи з колекціями Map і Set.

## Set

Объект `Set` – это особый вид коллекции: «множество» значений \(без ключей\), где каждое значение может появляться только один раз.

Его основные методы это:

* `new Set(iterable)` – создаёт `Set`, и если в качестве аргумента был предоставлен итерируемый объект \(обычно это массив\), то копирует его значения в новый `Set`.
* `set.add(value)` – добавляет значение \(если оно уже есть, то ничего не делает\), возвращает тот же объект `set`.
* `set.delete(value)` – удаляет значение, возвращает `true`, если `value` было в множестве на момент вызова, иначе `false`.
* `set.has(value)` – возвращает `true`, если значение присутствует в множестве, иначе `false`.
* `set.clear()` – удаляет все имеющиеся значения.
* `set.size` – возвращает количество элементов в множестве.

Основная «изюминка» – это то, что при повторных вызовах `set.add()` с одним и тем же значением ничего не происходит, за счёт этого как раз и получается, что каждое значение появляется один раз.

Например, мы ожидаем посетителей, и нам необходимо составить их список. Но повторные визиты не должны приводить к дубликатам. Каждый посетитель должен появиться в списке только один раз.

Множество `Set` – как раз то, что нужно для этого:

```text
let set = new Set();

let john = { name: "John" };
let pete = { name: "Pete" };
let mary = { name: "Mary" };

// считаем гостей, некоторые приходят несколько раз
set.add(john);
set.add(pete);
set.add(mary);
set.add(john);
set.add(mary);

// set хранит только 3 уникальных значения
alert(set.size); // 3

for (let user of set) {
  alert(user.name); // John (потом Pete и Mary)
}
```

## Map

Альтернативой множеству `Set` может выступать массив для хранения гостей и дополнительный код для проверки уже имеющегося элемента с помощью [arr.find](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/find). Но в этом случае будет хуже производительность, потому что `arr.find` проходит весь массив для проверки наличия элемента. Множество `Set` лучше оптимизировано для добавлений, оно автоматически проверяет на уникальность.

[Map](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Map) – это коллекция ключ/значение, как и `Object`. Но основное отличие в том, что `Map` позволяет использовать ключи любого типа.

Методы и свойства:

* `new Map()` – создаёт коллекцию.
* `map.set(key, value)` – записывает по ключу `key` значение `value`.
* `map.get(key)` – возвращает значение по ключу или `undefined`, если ключ `key` отсутствует.
* `map.has(key)` – возвращает `true`, если ключ `key` присутствует в коллекции, иначе `false`.
* `map.delete(key)` – удаляет элемент по ключу `key`.
* `map.clear()` – очищает коллекцию от всех элементов.
* `map.size` – возвращает текущее количество элементов.

Например:

```text
let map = new Map();

map.set("1", "str1");    // строка в качестве ключа
map.set(1, "num1");      // цифра как ключ
map.set(true, "bool1");  // булево значение как ключ

// помните, обычный объект Object приводит ключи к строкам?
// Map сохраняет тип ключей, так что в этом случае сохранится 2 разных значения:
alert(map.get(1)); // "num1"
alert(map.get("1")); // "str1"

alert(map.size); // 3
```

Как мы видим, в отличие от объектов, ключи не были приведены к строкам. Можно использовать любые типы данных для ключей.

**Map может использовать объекты в качестве ключей.**

Например:

```text
let john = { name: "John" };

// давайте сохраним количество посещений для каждого пользователя
let visitsCountMap = new Map();

// объект john - это ключ для значения в объекте Map
visitsCountMap.set(john, 123);

alert(visitsCountMap.get(john)); // 123
```

Использование объектов в качестве ключей – это одна из известных и часто применяемых возможностей объекта `Map`. При строковых ключах обычный объект `Object` может подойти, но для ключей-объектов – уже нет.

